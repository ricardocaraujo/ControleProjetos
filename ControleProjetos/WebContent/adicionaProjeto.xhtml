<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:p="http://primefaces.org/ui">
		
	
	
	<ui:composition template="_template.xhtml" rendered="#{not empty adicionaProjetoMB.projeto.nome}">
		
		<ui:define name="titulo" rendered="#{not empty adicionaProjetoMB.projeto.nome}">
			Adiciona Projeto
		</ui:define>
		<ui:define name="conteudo">
			<h:form id="formulario" enctype="multipart/form-data">
				<p:panelGrid id="tabela">
				
					<p:row>
						<p:column>
							<p:outputLabel value="Nome do projeto" for="nome"/>
						</p:column>
						<p:column>
							<p:inputText id="nome" value="#{adicionaProjetoMB.projeto.nome}"
								required="true" requiredMessage="Nome obrigatório"/>					
						</p:column>
					</p:row>
					
					<p:row>
						<p:column>
							<p:outputLabel value="Objetivo" for="objetivo"/>
						</p:column>
						<p:column>
							<p:inputTextarea id="objetivo" style="width: 400px" value="#{adicionaProjetoMB.projeto.objetivo}"/>
						</p:column>
					</p:row>
					
					<p:row>
						<p:column>
							<p:outputLabel value="Justificativa" for="justificativa"/>
						</p:column>
						<p:column>
							<p:inputTextarea id="justificativa" style="width: 400px" value="#{adicionaProjetoMB.projeto.justificativa}"/>
						</p:column>
					</p:row>
					
					<p:row>
						<p:column>
							<p:outputLabel value="Data de início" for="dataInicio"/>
						</p:column>
						<p:column>
							<p:calendar id="dataInicio" value="#{adicionaProjetoMB.projeto.dataInicio.time}" 
										timeZone="America/Sao_Paulo" pattern="dd/MM/yyyy" mask="true"/>
						</p:column>
					</p:row>
					
					<p:row>
						<p:column>
							<p:outputLabel value="Data de término" for="dataFim"/>
						</p:column>
						<p:column>
							<p:calendar id="dataFim" value="#{adicionaProjetoMB.projeto.dataFim.time}" 
										timeZone="America/Sao_Paulo" pattern="dd/MM/yyyy" mask="true"/>					
						</p:column>
					</p:row>
					
					<p:row>
						<p:column>
							<p:outputLabel value="Situação"/>
						</p:column>
						<p:column>
							<p:selectOneRadio value="#{adicionaProjetoMB.projeto.situacao}" converter="situacaoEnumConverter" layout="grid" columns="2">
								<f:selectItems value="#{adicionaProjetoMB.situacoesPossiveis}" var="situacao"
												itemValue="#{situacao}" itemLabel="#{situacao.descricao}"/>
							</p:selectOneRadio>
						</p:column>
					</p:row>
					
					<p:row>
						<p:column>
							<p:outputLabel value="Linha de Pesquisa"/>
						</p:column>
						<p:column>
							<p:selectOneRadio value="#{adicionaProjetoMB.idLinhaDePesquisa}" converter="javax.faces.Integer">
								<f:selectItems value="#{adicionaProjetoMB.linhasDePesquisa}" var="linhaDePesquisa" 
											itemValue="#{linhaDePesquisa.id}" itemLabel="#{linhaDePesquisa.nome}">
								
								</f:selectItems>				
							</p:selectOneRadio>
						</p:column>
					</p:row>
					
					<p:row>
						<p:column>
							<p:outputLabel value="Coordenadores"/>
						</p:column>
						<p:column>	
							<p:selectManyMenu value="#{adicionaProjetoMB.idDosCoordenadores}" showCheckbox="true" converter="javax.faces.Integer">
								<f:selectItems value="#{adicionaProjetoMB.empregados}" var="coordenador" 
												itemValue="#{coordenador.id}" itemLabel="#{coordenador.nome}"/>
							</p:selectManyMenu>	
						</p:column>
					</p:row>
					
					<p:row>
						<p:column>
							<p:outputLabel value="Responsáveis Técnicos"/>
						</p:column>
						<p:column>	
							<p:selectManyMenu value="#{adicionaProjetoMB.idDosResponsaveisTecnicos}" showCheckbox="true" converter="javax.faces.Integer">
								<f:selectItems value="#{adicionaProjetoMB.empregados}" var="responsaveisTecnicos"
												itemValue="#{responsaveisTecnicos.id}" itemLabel="#{responsaveisTecnicos.nome}"/>			
							</p:selectManyMenu>
						</p:column>
					</p:row>
					<p:row>
						<p:column>	
							<p:outputLabel value="Marco do Projeto"/>
						</p:column>
						<p:column>									
							<h:dataTable id="listaMarcos" value="#{adicionaProjetoMB.projeto.marcos}" var="marco" required="true">
								<h:column>
									<f:facet name="header">
										<p:outputLabel value="Descrição" />
									</f:facet>
									<p:inputText value="#{marco.descricao}" required="true" requiredMessage="É necessário inserir o marco" style="width: 350px" />
								</h:column>
								<h:column>
									<f:facet name="header">
										<p:outputLabel value="Data" />
									</f:facet>
									<p:calendar value="#{marco.data.time}" pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo" mask="true"/>
								</h:column>
								<h:column>
									<h:commandLink styleClass="ui-icon ui-icon-closethick" action="#{adicionaProjetoMB.removeMarco(marco)}">
										<f:ajax render="formulario:listaMarcos"/>	
									</h:commandLink>
								</h:column>
							</h:dataTable>
							<h:commandLink styleClass="ui-icon ui-icon-plusthick" action="#{adicionaProjetoMB.adicionaMarco}">
								<f:ajax execute="listaMarcos" render="listaMarcos"/>		
							</h:commandLink>
						</p:column>
					</p:row>
					
					<p:row>
						<p:column colspan="2">
							<p:timeline id="timeline" value="#{adicionaProjetoMB.linhaTempo.model}" height="250px" width="900px"
									editable="true"
		        					selectable="#{adicionaProjetoMB.linhaTempo.selectable}"
							        zoomable="#{adicionaProjetoMB.linhaTempo.zoomable}"
							        moveable="#{adicionaProjetoMB.linhaTempo.moveable}"
							        stackEvents="#{adicionaProjetoMB.linhaTempo.stackEvents}"
							        axisOnTop="#{adicionaProjetoMB.linhaTempo.axisOnTop}"
							        eventStyle="#{adicionaProjetoMB.linhaTempo.eventStyle}"
							        showCurrentTime="#{adicionaProjetoMB.linhaTempo.showCurrentTime}"
							        showNavigation="#{adicionaProjetoMB.linhaTempo.showNavigation}"
							        start="#{adicionaProjetoMB.linhaTempo.dataInicio.time}"
							        end="#{adicionaProjetoMB.linhaTempo.dataFim.time}"/>							
						</p:column>
					</p:row>								
					<p:row>
						<p:column>
							<p:outputLabel value="EAP"/>
						</p:column>
						<p:column>	
							<p:fileUpload fileUploadListener="#{adicionaProjetoMB.exibeImagemEap}" style="width: 400px" showButtons="false"/>
						</p:column>
					</p:row>	
							
				</p:panelGrid>
				
				<h:panelGrid columns="2">
					<p:commandButton style="margin-top:20px" value="Salvar" action="#{adicionaProjetoMB.adiciona}"/>	
					<p:button style="margin-top:20px; " value="Voltar" outcome="listaProjeto" rendered="#{not empty adicionaProjetoMB.projeto.nome}"/>									
					<!-- <p:blockUI block="tabela" blocked="true" widgetVar="desbloqueio" rendered="#{not empty adicionaProjetoMB.projeto.nome}"/>
					<p:commandButton style="margin-top:20px" value="Alterar" onclick="PF('desbloqueio').hide()" rendered="#{not empty adicionaProjetoMB.projeto.nome}"/> -->					
				</h:panelGrid>						
			</h:form>	
		</ui:define>
	</ui:composition>
</html>
					
					
					